using Microsoft.Extensions.Logging;
using NSubstitute;
using NUnit.Framework;
using SympliSEOSolution.InterfaceLibrary;
using SympliSEOSolution.Utilities;
using System;
using System.Collections.Generic;
using System.Text;

namespace SympliSEOSolution.Utilities.Tests
{
    [TestFixture()]
    public class UrlPositionsTests
    {
        string html = "<!DOCTYPE html><html lang=\"en-AU\"><head><title>e-settlements - Google Search</title></head><body jsmodel=\" \"><header id=\"hdr\"><div class=\"cOl4Id\"><a href=\"/?sa=X&amp;ved=0ahUKEwiIyrPjurnlAhXGGDQIHXglAbYQOwgC\"><span class=\"V6gwVd\">G</span><span class=\"iWkuvd\">o</span><span class=\"cDrQ7\">o</span><span class=\"V6gwVd\">g</span><span class=\"ntlR9\">l</span><span class=\"iWkuvd tJ3Myc\">e</span></a></div><div class=\"bz1lBb\"><form class=\"Pg70bf\" id=\"sf\"><a class=\"l\" href=\"/?num=1&amp;output=search&amp;ie=UTF-8&amp;sa=X&amp;ved=0ahUKEwiIyrPjurnlAhXGGDQIHXglAbYQPAgE\"><span class=\"V6gwVd\">G</span><span class=\"iWkuvd\">o</span><span class=\"cDrQ7\">o</span><span class=\"V6gwVd\">g</span><span class=\"ntlR9\">l</span><span class=\"iWkuvd tJ3Myc\">e</span></a><div class=\"H0PQec\"><div class=\"sbc esbc\"><div class=\"x\">?</div><div class=\"sc\"></div></div></div><button id=\"qdClwb\" type=\"submit\"></button></form></div><noscript><div style=\"display:block\">Please click <a href=\"/search?q=e-settlements&amp;num=1&amp;ie=UTF-8&amp;gbv=1&amp;sei=V_2zXcjCEMax0PEP-MqEsAs\">here</a> if you are not redirected within a few seconds.</div></noscript></header><div id=\"main\"><div><div class=\"KP7LCb\"> <div class=\"bRsWnc\"> <div class=\"N6RWV\"> <div class=\"Pg70bf Uv67qb\"> <span class=\"OXXup\">All</span><a class=\"eZt8xd\" href=\"/search?q=e-settlements&amp;num=1&amp;ie=UTF-8&amp;source=lnms&amp;tbm=nws&amp;sa=X&amp;ved=0ahUKEwiIyrPjurnlAhXGGDQIHXglAbYQ_AUICCgB\">News</a><a class=\"eZt8xd\" href=\"/search?q=e-settlements&amp;num=1&amp;ie=UTF-8&amp;source=lnms&amp;tbm=isch&amp;sa=X&amp;ved=0ahUKEwiIyrPjurnlAhXGGDQIHXglAbYQ_AUICSgC\">Images</a><a class=\"eZt8xd\" href=\"/search?q=e-settlements&amp;num=1&amp;ie=UTF-8&amp;source=lnms&amp;tbm=vid&amp;sa=X&amp;ved=0ahUKEwiIyrPjurnlAhXGGDQIHXglAbYQ_AUICigD\">Videos</a>   <a href=\"https://maps.google.com/maps?q=e-settlements&amp;num=1&amp;um=1&amp;ie=UTF-8&amp;sa=X&amp;ved=0ahUKEwiIyrPjurnlAhXGGDQIHXglAbYQ_AUICygE\">Maps</a>  <a href=\"/search?q=e-settlements&amp;num=1&amp;ie=UTF-8&amp;source=lnms&amp;tbm=shop&amp;sa=X&amp;ved=0ahUKEwiIyrPjurnlAhXGGDQIHXglAbYQ_AUIDCgF\">Shopping</a>  <a href=\"/search?q=e-settlements&amp;num=1&amp;ie=UTF-8&amp;source=lnms&amp;tbm=bks&amp;sa=X&amp;ved=0ahUKEwiIyrPjurnlAhXGGDQIHXglAbYQ_AUIDSgG\">Books</a>     <div class=\"FElbsf\"><a href=\"/advanced_search\" style=\"white-space:nowrap\" id=\"st-toggle\" role=\"button\">Search tools</a></div> </div> </div> </div> </div><div class=\"Pg70bf wEsjbd ZINbbc xpd O9g5cc uUPGi\" style=\"display:none\" id=\"st-card\"><div class=\"Xj2aue\"><div class=\"coPU8c\"><div class=\"RnNGze\"><div class=\"PA9J5\"><div class=\"RXaOfd\" role=\"button\" tabindex=\"0\"><div class=\"TWMOUc\">Any time</div><span class=\"OmTIzf\"></span></div><ul class=\"sa1toc ozatM\"><li class=\"yNFsl SkUj4c\">Any time</li><li class=\"yNFsl\"><a href=\"/search?q=e-settlements&amp;num=1&amp;ie=UTF-8&amp;source=lnt&amp;tbs=qdr:h&amp;sa=X&amp;ved=0ahUKEwiIyrPjurnlAhXGGDQIHXglAbYQpwUIDw\">Past hour</a></li><li class=\"yNFsl\"><a href=\"/search?q=e-settlements&amp;num=1&amp;ie=UTF-8&amp;source=lnt&amp;tbs=qdr:d&amp;sa=X&amp;ved=0ahUKEwiIyrPjurnlAhXGGDQIHXglAbYQpwUIEA\">Past 24 hours</a></li><li class=\"yNFsl\"><a href=\"/search?q=e-settlements&amp;num=1&amp;ie=UTF-8&amp;source=lnt&amp;tbs=qdr:w&amp;sa=X&amp;ved=0ahUKEwiIyrPjurnlAhXGGDQIHXglAbYQpwUIEQ\">Past week</a></li><li class=\"yNFsl\"><a href=\"/search?q=e-settlements&amp;num=1&amp;ie=UTF-8&amp;source=lnt&amp;tbs=qdr:m&amp;sa=X&amp;ved=0ahUKEwiIyrPjurnlAhXGGDQIHXglAbYQpwUIEg\">Past month</a></li><li class=\"yNFsl\"><a href=\"/search?q=e-settlements&amp;num=1&amp;ie=UTF-8&amp;source=lnt&amp;tbs=qdr:y&amp;sa=X&amp;ved=0ahUKEwiIyrPjurnlAhXGGDQIHXglAbYQpwUIEw\">Past year</a></li></ul></div><div class=\"PA9J5\"><div class=\"RXaOfd\" role=\"button\" tabindex=\"0\"><div class=\"TWMOUc\">All results</div><span class=\"OmTIzf\"></span></div><ul class=\"sa1toc ozatM\"><li class=\"yNFsl SkUj4c\">All results</li><li class=\"yNFsl\"><a href=\"/search?q=e-settlements&amp;num=1&amp;ie=UTF-8&amp;source=lnt&amp;tbs=li:1&amp;sa=X&amp;ved=0ahUKEwiIyrPjurnlAhXGGDQIHXglAbYQpwUIFQ\">Verbatim</a></li></ul></div></div></div></div></div></div><div><!--SW_C_X--></div><div><div class=\"ZINbbc xpd O9g5cc uUPGi\"><div class=\"kCrYT\"><span><div class=\"BNeawe deIvCb AP7Wnd\">Sympli Australia Pty Ltd</div></span><span><div class=\"BNeawe tAd8D AP7Wnd\">Legal services in the City of Sydney, New South Wales</div></span><div class=\"nYT7Qb\"></div></div><div class=\"x54gtf\"></div><div class=\"kCrYT\"><div class=\"skVgpb\"><a class=\"VGHMXd\" href=\"https://maps.google.com/maps?num=1&amp;um=1&amp;ie=UTF-8&amp;fb=1&amp;gl=au&amp;sa=X&amp;geocode=KfuLKnYBrxJrMb4a5uDkbXdC&amp;daddr=Sympli+Australia+Pty+Ltd,+Level+16/130+Pitt+St,+Sydney+NSW+2000&amp;ved=2ahUKEwiIyrPjurnlAhXGGDQIHXglAbYQlDt6BAgBEAM\"><div class=\"LpaDrb S7Jdze\" style=\"width:24px;height:24px\"></div><div class=\"BNeawe ji5jpf uEec3 AP7Wnd\">Directions</div></a><a class=\"VGHMXd\" href=\"/url?q=http://www.sympli.com.au/&amp;sa=U&amp;ved=2ahUKEwiIyrPjurnlAhXGGDQIHXglAbYQgU96BAgBEAQ&amp;usg=AOvVaw3VdbJ-_rnzVOmzkOhJQNZ6\"><div class=\"LpaDrb S7Jdze\" style=\"width:24px;height:24px\"></div><div class=\"BNeawe ji5jpf uEec3 AP7Wnd\">Website</div></a></div></div><div class=\"vbShOe kCrYT\"><div class=\"AVsepf\"><div class=\"BNeawe s3v9rd AP7Wnd\"><span><span class=\"BNeawe s3v9rd AP7Wnd\">Address</span></span>: <span><span class=\"BNeawe tAd8D AP7Wnd\">Level 16/130 Pitt St, Sydney NSW 2000</span></span></div></div><div class=\"AVsepf\"><div class=\"BNeawe s3v9rd AP7Wnd\"><span><span class=\"BNeawe s3v9rd AP7Wnd\">Hours</span></span>: <span><span class=\"BNeawe tAd8D AP7Wnd\">Closed &#8901; Opens 8:30AM Mon</span></span></div></div><div class=\"AVsepf u2x1Od\"><div class=\"BNeawe s3v9rd AP7Wnd\"><span><span class=\"BNeawe s3v9rd AP7Wnd\">Phone</span></span>: <span><span class=\"BNeawe tAd8D AP7Wnd\">1300 796 754</span></span></div></div></div></div></div><div><div class=\"ZINbbc xpd O9g5cc uUPGi\"><div class=\"kCrYT\"><a href=\"/url?q=https://www.sympli.com.au/&amp;sa=U&amp;ved=2ahUKEwiIyrPjurnlAhXGGDQIHXglAbYQFjAIegQIABAB&amp;usg=AOvVaw3finkuL7kXJ43Lw5nH2Oh8\"><div class=\"BNeawe vvjwJb AP7Wnd\">Sympli: Making e-Settlements Simple</div><div class=\"BNeawe UPmit AP7Wnd\">https://www.sympli.com.au</div></a></div><div class=\"x54gtf\"></div><div class=\"kCrYT\"><div><div class=\"BNeawe s3v9rd AP7Wnd\"><div><div><div class=\"BNeawe s3v9rd AP7Wnd\">Meet Sympli - the new Electronic Settlements provider built by users for users. We're here to make e-Settlements simple. Find out more.\n<span class=\"BNeawe\"><a href=\"/url?q=https://www.sympli.com.au/about-us/&amp;sa=U&amp;ved=2ahUKEwiIyrPjurnlAhXGGDQIHXglAbYQ0gIwCHoECAAQAg&amp;usg=AOvVaw0o0Fgc1LA0f8Dr4z-ruuhH\"><span class=\"XLloXe AP7Wnd\">About Us</span></a></span> ? <span class=\"BNeawe\"><a href=\"/url?q=https://www.sympli.com.au/work-with-us/&amp;sa=U&amp;ved=2ahUKEwiIyrPjurnlAhXGGDQIHXglAbYQ0gIwCHoECAAQAw&amp;usg=AOvVaw1uYMM_tnW41QHJHoctW3WK\"><span class=\"XLloXe AP7Wnd\">Work at Sympli</span></a></span> ? <span class=\"BNeawe\"><a href=\"/url?q=https://www.sympli.com.au/our-team/&amp;sa=U&amp;ved=2ahUKEwiIyrPjurnlAhXGGDQIHXglAbYQ0gIwCHoECAAQBA&amp;usg=AOvVaw1ux508ekcNLliXGVwsowro\"><span class=\"XLloXe AP7Wnd\">Our Team</span></a></span> ? <span class=\"BNeawe\"><a href=\"/url?q=https://www.sympli.com.au/contact-us/&amp;sa=U&amp;ved=2ahUKEwiIyrPjurnlAhXGGDQIHXglAbYQ0gIwCHoECAAQBQ&amp;usg=AOvVaw0oLHCiVa29IbvVa35aX0F7\"><span class=\"XLloXe AP7Wnd\">Contact Us</span></a></span></div></div></div></div></div></div></div></div><footer> <div>  <div class=\"ZINbbc xpd O9g5cc uUPGi BmP5tf\"><div class=\"nMymef MUxGbd lyLwlc\"><a class=\"nBDE1b G5eFlf\" href=\"/search?q=e-settlements&amp;num=1&amp;ie=UTF-8&amp;ei=V_2zXcjCEMax0PEP-MqEsAs&amp;start=1&amp;sa=N\" aria-label=\"Next page\">Next &gt;</a></div></div> </div>   <div id=\"mCljob\"><div><a href=\"/url?q=https://accounts.google.com/ServiceLogin%3Fcontinue%3Dhttps://www.google.com/search%253Fq%253De-settlements%2526num%253D1%26hl%3Den&amp;sa=U&amp;ved=0ahUKEwiIyrPjurnlAhXGGDQIHXglAbYQxs8CCCM&amp;usg=AOvVaw05VXPr4Isy3q570562236k\">Sign in</a></div><div><a class=\"ksTU4c\" href=\"https://www.google.com/preferences?hl=en-AU&amp;fg=1&amp;sa=X&amp;ved=0ahUKEwiIyrPjurnlAhXGGDQIHXglAbYQ5fUCCCQ\">Settings</a><a class=\"ksTU4c\" href=\"//policies.google.com/privacy?fg=1\">Privacy</a><a class=\"ksTU4c\" href=\"//policies.google.com/terms?fg=1\">Terms</a></div></div>  </footer></div><!-- cctlcm 5 cctlcm --><textarea class=\"csi\" name=\"csi\" style=\"display:none\"></textarea></body></html>";

        [Test()]
        public void GetPositionOfOccurenceTest()
        {
            UrlPositions positions = new UrlPositions(Substitute.For<ILogger>());
            var abc = positions.GetPositionOfOccurence(html, "www.sympli.com");

            Assert.IsNotNull(abc);
            Assert.AreEqual(2, abc.Count);
        }
    }
}